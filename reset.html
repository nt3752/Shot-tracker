<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Reset Shot Tracker</title>
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:18px;line-height:1.35;}
    code{background:#f2f2f2;padding:2px 6px;border-radius:6px;}
    .btn{display:inline-block;margin-top:10px;padding:10px 14px;border-radius:10px;border:1px solid #ccc;text-decoration:none;}
  </style>
</head>
<body>
  <h2>Resetting…</h2>
  <p>This page clears cached assets and unregisters any Service Worker for Shot Tracker.</p>
  <p>If you stay stuck, open iOS <b>Settings → Safari → Advanced → Website Data</b> and delete data for <code>github.io</code>.</p>
  <a class="btn" href="./index.html">Go to app</a>

  <script>
  (async function(){
    try{
      // Unregister service workers
      if('serviceWorker' in navigator){
        const regs = await navigator.serviceWorker.getRegistrations();
        await Promise.all(regs.map(r=>r.unregister()));
      }
      // Clear Cache Storage
      if(window.caches && caches.keys){
        const keys = await caches.keys();
        await Promise.all(keys.map(k=>caches.delete(k)));
      }
      // Optional: leave localStorage intact (courses/rounds). Commented out:
      // localStorage.clear();

    }catch(e){}
    // Bust cache on redirect
    location.href = './index.html?fresh=' + Date.now();
  })();
  </script>
</body>
</html>
