<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Shot Tracker v37_19</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#061612" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<header class="header">
  <div class="toprow">
    <div class="title">Shot Tracker <span id="appVersionTag" class="version-tag">v37_19</span></div>
    <button id="liveBadge" class="badge on" type="button" title="Tap to toggle live yardage">LIVE:‚Äî</button>
  </div>
  <div class="subrow">
    <div class="pill">Hole <span id="holeNum">1</span></div>
    <div class="pill">Shots <span id="shotCount">0</span></div>
    <div class="pill">Total <span id="totalShots">0</span></div>
    <div class="pill">Course <span id="courseName">‚Äî</span></div>
    <div class="pill">Round <span id="roundName">‚Äî</span></div>
  </div>
</header>

<main class="container">
  <section class="section">
    <h2>Course</h2>
    <div class="row">
      <select id="courseSelect"></select>
      <button id="addCourse" class="mini" type="button">+ Course</button>
      <button id="clearCourse" class="mini danger2" type="button">Clear Course Data</button>
        <button id="courseSetup" type="button">‚öôÔ∏è Setup</button>
    </div>
  </section>



  <section class="section">
    <h2>This Hole</h2>
    <div class="metaLine">
      <div class="metaLabel">Par</div>
      <button class="toggleBtn mini" id="par3" type="button">3</button>
      <button class="toggleBtn mini" id="par4" type="button">4</button>
      <button class="toggleBtn mini" id="par5" type="button">5</button>
      <div class="spacer"></div>
      <button class="toggleBtn" id="fw" type="button">Fairway</button>
      <button class="toggleBtn" id="gir" type="button">GIR</button>
    </div>

    <div class="metaLine" style="margin-top:10px;">
      <div class="metaLabel">Hole Yds</div>
      <input id="holeYards" type="number" inputmode="numeric" placeholder="e.g. 385" />
      <div class="spacer"></div>
      <button id="deleteLast" class="mini danger2" type="button">üóë Delete Last</button>
    </div>
  </section>
  <section class="section">
    <h2>Rangefinder</h2>
    <div class="row manualWrap" id="manualWrap" style="margin-top:10px;">
      <input id="manualInput" type="number" inputmode="decimal" placeholder="e.g. 25" />
      <div class="unit" id="manualUnit">yds</div>
      <div class="pill" style="margin-left:auto;">Rangefinder</div>
    </div>
    <div class="rangefinder-row" style="margin-top:10px;">
  <div class="pill" id="toFlag" style="margin-top:0;">To Flag:‚Äî</div>
  <button id="openCaddyBtn" class="secondary caddy-open" type="button">CADDY</button>
</div>
<div class="attempted-row">
  <div class="attempted-label">Attempt</div>
  <input id="attemptedDistance" class="attempted-input" type="number" inputmode="numeric" min="0" placeholder="‚Äî" />
  <div class="unit">yds</div>
</div>
  </section>

  <section class="section">
    <div class="grid2x2">
      <button id="markTee" class="primary" type="button">üèÅ Mark Tee</button>
      <button id="markFlag" class="primary" type="button">üö© Mark Flag</button>
      <button id="markShot" class="primary" type="button" disabled>‚ûï Add Shot</button>
    </div>
  </section>

  <section class="section row navrow">
    <button id="prev" class="mini" type="button">‚óÄ Prev</button>
    <div class="spacer"></div>
    <button id="next" class="mini" type="button">Next ‚ñ∂</button>
    <div class="spacer"></div>
    <button id="export" class="mini" type="button">Export CSV</button>
    <button id="resetRound" class="mini danger2" type="button">Reset</button>
    <div class="spacer"></div>
    <button id="newRound" class="mini" type="button">New/Load</button>
  </section>

    <section class="section" id="shotActions">
    <button id="addPenalty" class="mini" type="button">+ Penalty</button>
  </section>

<section class="section shots" id="shotsList"></section>

</main>

<!-- Round modal -->
<div class="modal" id="roundModal" aria-hidden="true">
  <div class="modalCard">
    <div class="modalTitle">Round</div>
    <div class="modalText">Start a new round or continue an existing one.</div>

    <div class="modalRow">
      <input id="roundTitleInput" placeholder="Round name (optional)" />
      <button id="startNewBtn" class="primaryBtn" type="button">Start New</button>
    </div>

    <div class="modalText" style="margin-top:12px;">Continue recent:</div>
    <div id="roundList" class="roundList"></div>

    <div class="modalRow" style="justify-content:flex-end;margin-top:12px;">
      <button id="closeModal" class="miniBtn" type="button">Close</button>
    </div>
  </div>
</div>


<div id="caddyBackdrop" class="caddy-backdrop hidden" aria-hidden="true"></div>
<div id="caddyPanel" class="caddy-panel hidden" role="dialog" aria-modal="true">
  <div class="caddy-top">
    <div id="caddyTarget" class="caddy-target">Target: ‚Äî</div>
    <button id="closeCaddyBtn" class="secondary caddy-close-inline" type="button">Close</button>
    <button id="openBagBtn" class="secondary bag-open" type="button">BAG</button>
    <div class="caddy-mode">
      <button id="modeCarry" class="mode-btn active" type="button">CARRY</button>
      <button id="modeTotal" class="mode-btn" type="button">TOTAL</button>
    </div>
  </div>
  <div class="caddy-adjust">
    <button class="adj" data-adj="-10" type="button">-10</button>
    <button class="adj" data-adj="-5" type="button">-5</button>
    <button class="adj" data-adj="0" type="button">0</button>
    <button class="adj" data-adj="5" type="button">+5</button>
    <button class="adj" data-adj="10" type="button">+10</button>
  </div>
  <div id="caddySuggestions" class="caddy-suggestions"></div>
</div>


<div id="bagBackdrop" class="caddy-backdrop hidden" aria-hidden="true"></div>

<div id="bagPanel" class="bag-panel hidden" role="dialog" aria-modal="true">
  <div class="bag-top">
    <div class="bag-title">Bag Matrix</div>
    <button id="closeBagBtn" class="secondary bag-close" type="button">Close</button>
  </div>

  <div class="bag-controls">
    <label class="bag-label" for="bagClubSelect">Club</label>
    <select id="bagClubSelect" class="bag-select"></select>

    <label class="bag-label" for="bagShotTypeSelect">Type</label>
    <select id="bagShotTypeSelect" class="bag-select"></select>

    <button id="bagClearBtn" class="secondary bag-reset" type="button">Clear</button>
  </div>

  <div class="bag-grid-single">
    <div class="bag-header-single">
      <div></div><div>Carry</div><div>Total</div>
    </div>
    <div class="bag-row-single">
      <div class="bag-type-chip" id="bagSelectedLabel">‚Äî</div>
      <input class="bag-input" id="bagCarryInput" type="number" inputmode="numeric" min="0" placeholder="0" />
      <input class="bag-input" id="bagTotalInput" type="number" inputmode="numeric" min="0" placeholder="0" />
    </div>
  </div>

  <div class="bag-footnote">Edits save to your phone immediately. Update <b>config.js</b> later to make them permanent.</div>
</div>


<div class="toast" id="toast"></div>


  
<script>
(function(){
  function show(msg){
    var t=document.getElementById('toast');
    if(t){ t.textContent=msg; t.style.display='block'; }
  }
  window.addEventListener('error', function(e){
    show('‚ùå JS error: ' + (e.message||'error') + (e.filename?(' @'+e.filename.split('/').pop()+':'+e.lineno):''));
  });
  window.addEventListener('unhandledrejection', function(e){
    var r=e.reason;
    show('‚ùå Promise: ' + (r && r.message ? r.message : String(r)));
  });
  window.__ST_BOOTED=false;
  setTimeout(function(){ if(!window.__ST_BOOTED) show('‚ùå app.js did not boot (module failed to load/run)'); }, 1200);
})();
</script>
<script src="config.js?v=37_19"></script>
<script type="module" src="app.js?v=37_19"></script>
<!-- Cache/SW reset helper: /reset.html -->
</body>
</html>