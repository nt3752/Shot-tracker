<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Shot Tracker</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#061612">
<style>
body{background:#061612;color:#eaf6f1;font-family:-apple-system,system-ui;margin:0;padding:14px}
button{padding:10px 12px;border-radius:12px;border:1px solid #345;background:#123;color:#fff;margin:4px 0}
.selected{background:#2b6}
.badge{float:right;padding:6px 10px;border-radius:20px;border:2px solid #2b6}
.card{margin:8px 0;padding:10px;border:1px solid #233;border-radius:14px;display:flex;justify-content:space-between}
</style>
</head>
<body>

<h2>Shot Tracker <span id="liveBadge" class="badge">LIVE:â€”</span></h2>

<button id="addShot">Add Test Shot</button>
<button id="export">Export CSV</button>

<div id="shotsList"></div>

<script>
let shots=[];
let holeSummaries=[];

function render(){
 const list=document.getElementById("shotsList");
 list.innerHTML="";
 shots.forEach((s,i)=>{
   const div=document.createElement("div");
   div.className="card";
   div.innerHTML=`Shot ${i+1} ${s.club} ${s.distance||0}y <button data-del="${i}">ðŸ—‘</button>`;
   list.appendChild(div);
 });
}

document.getElementById("shotsList").addEventListener("click",e=>{
 const b=e.target.closest("[data-del]");
 if(!b)return;
 shots.splice(+b.dataset.del,1);
 render();
});

document.getElementById("addShot").onclick=()=>{
 shots.push({club:"7I",distance:Math.floor(Math.random()*20)});
 render();
};

document.getElementById("export").onclick=()=>{
 const rows=["Hole,ShotIndex,Club,Distance"];
 shots.forEach((s,i)=>rows.push(`1,${i+1},${s.club},${s.distance}`));

 rows.push("");
 rows.push("HOLE_SUMMARY");
 rows.push("Hole,Par,Score");
 rows.push("1,4,"+shots.length);

 const blob=new Blob([rows.join("\n")]);
 const a=document.createElement("a");
 a.href=URL.createObjectURL(blob);
 a.download="round.csv";
 a.click();
};

render();

if('serviceWorker' in navigator){
 navigator.serviceWorker.register('./service-worker.js');
}
</script>
</body>
</html>
